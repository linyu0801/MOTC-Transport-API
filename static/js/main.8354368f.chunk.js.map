{"version":3,"sources":["pages/ScenicSpot.js","pages/NotFoundPage.js","pages/City.js","component/Maincontain.js","component/MyNavbar.js","App.js","reportWebVitals.js","index.js"],"names":["ScenicSpot","props","useState","rows","setRows","n","a","url","request","Request","method","fetch","response","json","data","console","log","prevState","options","root","rootMargin","threshold","callback","entries","observer","forEach","entry","isIntersecting","fetchdata","useEffect","observe_target","document","querySelector","IntersectionObserver","observe","ScienicDisplay","map","value","i","className","src","Picture","PictureUrl1","process","alt","Name","DescriptionDetail","p_price","id","NotFoundPage","withRouter","city","match","params","fetchcity","City","Position","PositionLat","PositionLon","Maincontain","children","Navbar","collapseOnSelect","expand","variant","Brand","as","NavLink","to","Toggle","aria-controls","Collapse","Nav","Link","NavDropdown","Divider","title","index","location","basename","path","render","key","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.8354368f.chunk.js","sourcesContent":["import { useEffect, useState } from 'react'\r\n\r\nfunction ScenicSpot(props) {\r\n  const [rows, setRows] = useState([])\r\n  let n = 1\r\n\r\n  async function fetchdata() {\r\n    const url = `https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot?$top=30&$skip=${\r\n      30 * (n - 1)\r\n    }`\r\n    const request = new Request(url, {\r\n      method: 'GET',\r\n    })\r\n    const response = await fetch(request)\r\n    const data = await response.json()\r\n    console.log('回傳資料 : ', data)\r\n    // setRows(data)\r\n    setRows((prevState) => {\r\n      return [...prevState, ...data]\r\n    })\r\n    n = n + 1\r\n  }\r\n  let options = {\r\n    root: null,\r\n    rootMargin: '0px',\r\n    threshold: 1,\r\n  }\r\n  let callback = (entries, observer) => {\r\n    // entries 能拿到所有目標元素進出(intersect)變化的資訊\r\n    entries.forEach((entry) => {\r\n      if (entry.isIntersecting) {\r\n        console.log('n :', n)\r\n        fetchdata()\r\n      } else {\r\n        // 只在目標元素離開 viewport 時執行這裡的工作\r\n      }\r\n    })\r\n  }\r\n  useEffect(() => {\r\n    n = 1\r\n    // fetchdata()\r\n    const observe_target = document.querySelector('#TARGET_ELEMENT')\r\n\r\n    let observer = new IntersectionObserver(callback, options)\r\n    observer.observe(observe_target)\r\n  }, [])\r\n  let ScienicDisplay = (\r\n    <>\r\n      {rows.map((value, i) => (\r\n        <>\r\n          <div key={i} className={`col-xl-4 col-lg-5 col-md-6 `}>\r\n            <div className=\"product  fish-card w-100 position-relative\">\r\n              <div className=\"fish-img-box w-100\">\r\n                <img\r\n                  // src={\r\n                  //   Object.keys(value.Picture).length > 0\r\n                  //     ? `${value.Picture.PictureUrl1}`\r\n                  //     : 'imgnotfound.png'\r\n                  src={\r\n                    value.Picture.PictureUrl1\r\n                      ? `${value.Picture.PictureUrl1}`\r\n                      : process.env.PUBLIC_URL + '/img/notfound.jpg'\r\n                  }\r\n                  className=\"fish-product-img\"\r\n                  alt={`${value.Name}` + `圖片`}\r\n                />\r\n              </div>\r\n              <div className=\"fish-card-body w-100\">\r\n                <h5 className=\"fish-card-title\">{value.Name}</h5>\r\n                <p className=\"fish-card-text\">{value.DescriptionDetail}</p>\r\n                <hr className=\"fish-product-hr\" />\r\n                <div className=\"fish-product-price mb-1\">{value.p_price}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      ))}\r\n      <div id=\"TARGET_ELEMENT\"></div>\r\n    </>\r\n  )\r\n  useEffect(() => {\r\n    console.log('rows : ', rows)\r\n  }, [rows])\r\n  return (\r\n    <>\r\n      <div className=\"d-flex flex-wrap\">{ScienicDisplay}</div>\r\n    </>\r\n  )\r\n}\r\nexport default ScenicSpot\r\n","function NotFoundPage(props) {\r\n  return (\r\n    <>\r\n      <div className=\"d-flex flex-wrap\">\r\n        <h1>首頁</h1>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default NotFoundPage\r\n","import { useEffect, useState } from 'react'\r\nimport { useParams, withRouter } from 'react-router-dom'\r\n\r\nfunction City(props) {\r\n  const [rows, setRows] = useState([]) //狀態 rows 用來儲存回傳資料\r\n  let n = 1\r\n  //使用url param讀取使用者選取的縣市\r\n\r\n  async function fetchcity(city) {\r\n    const url =\r\n      'https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot/' +\r\n      city +\r\n      `?$top=${30}&$skip=${30 * (n - 1)}`\r\n    //一次抓三十筆第二次抓30筆時跳過已經抓取過的30筆\r\n    const request = new Request(url, {\r\n      method: 'GET',\r\n    })\r\n    const response = await fetch(request)\r\n    const data = await response.json()\r\n    console.log('回傳資料 : ', data)\r\n    setRows((prevState) => {\r\n      return [...prevState, ...data]\r\n    })\r\n    n = n + 1\r\n  }\r\n  //Intersection Obeserver API options 控制甚麼情況呼叫callback\r\n  let options = {\r\n    root: null,\r\n    rootMargin: '0px',\r\n    threshold: 0.75,\r\n  }\r\n  let callback = (entries, observer) => {\r\n    // entries 能拿到所有目標元素進出(intersect)變化的資訊\r\n    entries.forEach((entry) => {\r\n      if (entry.isIntersecting) {\r\n        // 只在目標元素進入 viewport 時執行這裡的工作\r\n        console.log('observecity :', props.match.params.city)\r\n        fetchcity(props.match.params.city)\r\n      } else {\r\n        // 只在目標元素離開 viewport 時執行這裡的工作\r\n      }\r\n    })\r\n  }\r\n  useEffect(() => {\r\n    const observe_target = document.querySelector('#TARGET_ELEMENT')\r\n\r\n    let observer = new IntersectionObserver(callback, options)\r\n    observer.observe(observe_target)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    console.log('rows :', rows) //紀錄資料變化\r\n  }, [rows])\r\n\r\n  let ScienicDisplay = (\r\n    <>\r\n      {rows.map((value, i) => (\r\n        <>\r\n          <div key={props.city} className={`col-xl-4 col-lg-5 col-md-6 `}>\r\n            <div className=\"product  fish-card w-100 position-relative\">\r\n              <div className=\"fish-img-box w-100\">\r\n                <img\r\n                  src={\r\n                    value.Picture.PictureUrl1\r\n                      ? `${value.Picture.PictureUrl1}`\r\n                      : process.env.PUBLIC_URL + '/img/notfound.jpg'\r\n                  }\r\n                  className=\"fish-product-img\"\r\n                  alt={`${value.Name}` + `圖片`}\r\n                />\r\n              </div>\r\n              <div className=\"fish-card-body w-100\">\r\n                <h5 className=\"fish-card-title\">\r\n                  {value.City}－{value.Name}\r\n                </h5>\r\n                <p className=\"fish-card-text\">{value.DescriptionDetail}</p>\r\n                <hr className=\"fish-product-hr\" />\r\n                <div className=\"fish-product-text mb-1\">\r\n                  經緯度: {value.Position.PositionLat},\r\n                  {value.Position.PositionLon}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      ))}\r\n      <div id=\"TARGET_ELEMENT\"></div>\r\n    </>\r\n  )\r\n\r\n  return (\r\n    <>\r\n      {/* <img src=\"http://localhost:3000/logo192.png\" alt=\"\" className=\"bg-img\" /> */}\r\n      {/* <div className=\"h-60\"></div> */}\r\n      <div className=\"row justify-content-center\">\r\n        <div className=\"d-flex flex-wrap\">{ScienicDisplay}</div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\nexport default withRouter(City)\r\n","function Maincontain(props) {\r\n  return (\r\n    <>\r\n      <div className=\"container\">{props.children}</div>\r\n    </>\r\n  )\r\n}\r\nexport default Maincontain\r\n","import React from 'react'\r\nimport { Navbar, Nav, NavDropdown } from 'react-bootstrap'\r\nimport { NavLink, withRouter } from 'react-router-dom'\r\nimport '../styles/navbar.scss'\r\n\r\nfunction MyNavbar(props) {\r\n  const city = [\r\n    'Taipei',\r\n    'NewTaipei',\r\n    'Taoyuan',\r\n    'Taichung',\r\n    'Tainan',\r\n    'Kaohsiung',\r\n    'Keelung',\r\n    'Hsinchu',\r\n    'HsinchuCounty',\r\n    'MiaoliCounty',\r\n    'ChanghuaCounty',\r\n    'NantouCounty',\r\n    'YunlinCounty',\r\n    'ChiayiCounty',\r\n    'Chiayi',\r\n    'PingtungCounty',\r\n    'YilanCounty',\r\n    'HualienCounty',\r\n    'TaitungCounty',\r\n    'KinmenCounty',\r\n    'PenghuCounty',\r\n    'LienchiangCounty',\r\n  ]\r\n  //紀錄有什麼縣市\r\n  return (\r\n    <>\r\n      <Navbar\r\n        className=\"alex-navbarHeight\"\r\n        collapseOnSelect\r\n        expand=\"lg\"\r\n        variant=\"dark\"\r\n        id=\"navbar\"\r\n        key={props.location}\r\n      >\r\n        <Navbar.Brand as={NavLink} to=\"/\" className=\"nav-left\"></Navbar.Brand>\r\n\r\n        <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\r\n        <Navbar.Collapse id=\"responsive-navbar-nav\">\r\n          <Nav className=\"mr-auto \">\r\n            <Nav.Link as={NavLink} to=\"/scenicSpot\">\r\n              全部縣市\r\n            </Nav.Link>\r\n\r\n            <Nav>\r\n              <NavDropdown.Divider />\r\n              <NavDropdown\r\n                title=\"各縣市景點\"\r\n                id=\"nav-member\"\r\n                className=\"nav-member-link \"\r\n              >\r\n                {city.map((value, index) => (\r\n                  <Nav.Link as={NavLink} to={`/scenicSpot/${city[index]}`}>\r\n                    {`${city[index]}`}\r\n                  </Nav.Link>\r\n                ))}\r\n              </NavDropdown>\r\n            </Nav>\r\n          </Nav>\r\n        </Navbar.Collapse>\r\n      </Navbar>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default withRouter(MyNavbar)\r\n","import {\n  BrowserRouter as Router,\n  Route,\n  Switch,\n  withRouter,\n} from 'react-router-dom'\nimport React from 'react'\n//pages\nimport ScenicSpot from './pages/ScenicSpot'\nimport NotFoundPage from './pages/NotFoundPage'\nimport City from './pages/City'\n\n//components\nimport Maincontain from './component/Maincontain'\nimport MyNavbar from './component/MyNavbar'\n\nfunction App(props) {\n  return (\n    <div key={props.location.key}>\n      <Router basename={process.env.PUBLIC_URL}>\n        <>\n          <MyNavbar />\n          <Maincontain>\n            <Switch>\n              <Route\n                path=\"/scenicSpot/:city\"\n                render={(props) => (\n                  <City key={props.match.params.city} {...props} />\n                )}\n              />\n\n              <Route path=\"/scenicSpot\">\n                <ScenicSpot />\n              </Route>\n\n              <Route path=\"*\">\n                <NotFoundPage />\n              </Route>\n            </Switch>\n          </Maincontain>\n        </>\n      </Router>\n    </div>\n  )\n}\n\nexport default withRouter(App)\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.scss'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\nimport { BrowserRouter as Router } from 'react-router-dom'\nReactDOM.render(\n  <React.StrictMode>\n    <Router basename=\"/MOTC-Transport-API\">\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}